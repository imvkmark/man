# chattr - 用来改变文件属性

> 用来改变文件属性。这项指令可改变存放在 ext2 文件系统上的文件或目录属性

符号的格式是 `+-=[aAcCdDeijsStTu]`

`+` 意味着将选择的属性添加到已经存在的文件属性上
`-` 是删除属性
`=` 将文件属性设置为指定的属性

```
chattr [ -RVf ] [ -v version ] [ mode ] files...
```

## 选项 & 参数

`-R`

递归处理，将指令目录下的所有文件及子目录一并处理

`-V`

显示指令执行过程

`-f`

抑制大多数错误消息

`-v <version>`

设置文件版本号(version/generation number)

**属性说明**

```
a : 仅仅支持追加
A : 不更新访问时间
c : 将文件或目录压缩后存放
C : 在写入时候不产生副本
d : 将文件或目录排除在操作之外
D : 同步目录更新
e : 程度格式
i : 不得任意更动文件或目录
j : 数据日志
s : 安全删除
S : 同步更新
t : 非尾部合并
T : 目录层次结构的顶级
u : 不可删除
```

接下来的属性都是只读的，可以用 `lsattr` 查看，不能用 chattr 进行修改

```
h : 大文件
E : 压缩错误
I : 索引目录
X : 压缩的原始访问?
Z : 压缩的零碎文件
```

## 实例

用 chattr 命令防止系统中某个关键文件被修改：

```
chattr +i /etc/fstab
```

然后试一下 rm、mv、rename 等命令操作于该文件，都是得到 Operation not permitted 的结果。

让某个文件只能往里面追加内容，不能删除，一些日志文件适用于这种操作：

```
chattr +a /webdata/log/web.access.log
```
