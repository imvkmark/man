# su

用于切换当前用户身份到其他用户身份

**su 命令** 用于切换当前用户身份到其他用户身份，变更时须输入所要变更的用户帐号与密码。

```
su [OPTION]... [-] [USER [ARG]...]
```

## 选项 & 参数

**选项**

`-c, --command=COMMAND`

变更账号为 USER 的使用者，并执行指令（command）后再变回原来使用者

`-f, --fast`

不必读启动文件（如 csh.cshrc 等），仅用于 csh 或 tcsh 两种 Shell

`-, -l, --login`
加了这个参数之后，就好像是重新登陆一样，大部分环境变量(例如 HOME、SHELL 和 USER 等)都是以该使用者(USER)为主，并且工作目录也会改变。如果没有指定 USER，缺省情况是 root

`-m, -p, --preserve-environment`

执行 su 时不改变环境变数

`-s, --shell=SHELL`

指定要执行的 shell, run SHELL if /etc/shells allows it

`--help`

显示说明文件

`--version`

显示版本资讯

**参数**

`USER`

欲变更的使用者账号

`ARG`

传入新的 Shell 参数

## 实例

变更帐号为 root 并在执行 ls 指令后退出变回原使用者：

```
su -c ls root
```

变更帐号为 root 并传入`-f`选项给新执行的 shell：

```
su root -f
```

变更帐号为 test 并改变工作目录至 test 的家目录：

```
su -test
```

在 root 用户下, 输入 su 普通用户. 则切换至普通用户, 从 root 切换到变通用户不需要密码

```
su [用户名]
```

**`su`命令与`su -` 命令有什么区别**

su 是切换到其他用户，但是不切换环境变量, su - 是完整的切换到一个用户环境

**`su`和`sudo`的区别**

由于 su 对切换到超级权限用户 root 后，权限的无限制性，所以 su 并不能担任多个管理员所管理的系统。如果用 su 来切换到超级用户来管理系统，也不能明确哪些工作是由哪个管理员进行的操作。特别是对于服务器的管理有多人参与管理时，最好是针对每个管理员的技术特长和 管理范围，并且有针对性的下放给权限，并且约定其使用哪些工具来完成与其相关的工作，这时我们就有必要用到 sudo。

通过 sudo，我们能把某些超级权限有针对性的下放，并且不需要普通用户知道 root 密码，所以 sudo 相对于权限无限制性的 su 来说，还是比较安全的，所以 sudo 也能被称为受限制的 su ；另外 sudo 是需要授权许可的，所以也被称为授权许可的 su；

sudo 执行命令的流程是当前用户切换到 root（或其它指定切换到的用户），然后以 root（或其它指定的切换到的用户）身份执行命令，执行完成后，直接退回到当前用户；而这些的前提是要通过 sudo 的配置文件/etc/sudoers 来进行授权；
